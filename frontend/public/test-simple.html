<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }
        .box {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .success { background: #4caf50; color: white; padding: 10px; border-radius: 4px; }
        .error { background: #f44336; color: white; padding: 10px; border-radius: 4px; }
        pre { background: #263238; color: #aed581; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>ğŸ§ª è¿æ¥æµ‹è¯•</h1>
    
    <div class="box">
        <h2>1. é¡µé¢åŠ è½½</h2>
        <div class="success">âœ“ HTMLé¡µé¢å·²æˆåŠŸåŠ è½½</div>
    </div>

    <div class="box">
        <h2>2. JavaScriptæ‰§è¡Œ</h2>
        <div id="jsTest">æ£€æµ‹ä¸­...</div>
    </div>

    <div class="box">
        <h2>3. åç«¯APIè¿æ¥</h2>
        <div id="apiTest">æ£€æµ‹ä¸­...</div>
    </div>

    <div class="box">
        <h2>4. è®¾å¤‡ä¿¡æ¯</h2>
        <pre id="deviceInfo">åŠ è½½ä¸­...</pre>
    </div>

    <script>
        // æµ‹è¯•JavaScriptæ‰§è¡Œ
        document.getElementById('jsTest').innerHTML = '<div class="success">âœ“ JavaScriptæ­£å¸¸æ‰§è¡Œ</div>';
        
        // æ˜¾ç¤ºè®¾å¤‡ä¿¡æ¯
        const hostname = window.location.hostname;
        document.getElementById('deviceInfo').textContent = 
            `URL: ${window.location.href}\n` +
            `Hostname: ${hostname}\n` +
            `User Agent: ${navigator.userAgent}\n` +
            `Screen: ${window.innerWidth}x${window.innerHeight}`;
        
        // æµ‹è¯•APIè¿æ¥
        const apiUrl = `http://${hostname}:8001/api/approval_tasks/11`;
        document.getElementById('apiTest').innerHTML = `<div style="color:#666;">æ­£åœ¨è¿æ¥: ${apiUrl}</div>`;
        
        fetch(apiUrl)
            .then(response => {
                if (response.ok) {
                    document.getElementById('apiTest').innerHTML = 
                        `<div class="success">âœ“ APIè¿æ¥æˆåŠŸ (HTTP ${response.status})</div>`;
                    return response.json();
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            })
            .then(data => {
                document.getElementById('apiTest').innerHTML += 
                    `<pre>ä»»åŠ¡ID: ${data.id}\nçŠ¶æ€: ${data.status}\nä¸»é¢˜: ${data.draft_subject}</pre>`;
            })
            .catch(error => {
                document.getElementById('apiTest').innerHTML = 
                    `<div class="error">âœ— APIè¿æ¥å¤±è´¥: ${error.message}<br>URL: ${apiUrl}</div>`;
            });
    </script>
</body>
</html>
